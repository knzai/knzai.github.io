---
layout: post
title: "SVG-CCC: SVG cross-codec-compilation"
image: /assets/img/projects/svg-cross-codec-compilation.svg
description: >
  Photo, scalar, and/or vector style compression in the same image for smaller size w/o losing crisp lines
---

While working on getting the [Cloud City site](https://cloudcoty.io) load times a little snappier, particularly on mobile (the only place image size matters that much anymore), I complained how I wished there was an image format that handled both jpg and png compression in the same file. Sure you can position one over the other with css, but having everything in one file is simpler for responsive scaling and optimizing (cutting down the separate file requests).

Then I realized there is such a format: you can composite different images together in an SVG and inline their Base64 encoded data so it's all one file.

This is what one of the header images from the company blog would look like when it has text and an image together in one. It's encoded as a png to keep everything crisp, and clocks in at 668kb:
![](/assets/img/posts/cross-codec-compilation.png)

If you just encode the whole thing to an AVIF, for a better file-size, since it has a photo you get the following 13kb image:
![](/assets/img/posts/cross-codec-compilation.avif)

For this image, the quality loss on the text is a little more neglible, just making the text a little fuzzy, but on an image with more complicated diagrams it can look worse.